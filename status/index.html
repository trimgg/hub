<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>trim. status</title>
    <link rel="icon" type="image/png" href="https://www.transparentpng.com/download/emoticons/thinking-blue-emoticons-hd-transparent-1b3uLJ.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --accent: #467983;
            --bg: #0f172a;
        }
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg);
            background-image: radial-gradient(circle at 50% 50%, #1e293b 0%, #0f172a 100%);
        }
        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .status-glow-online { box-shadow: 0 0 20px rgba(34, 197, 94, 0.4); }
        .status-glow-offline { box-shadow: 0 0 20px rgba(239, 68, 68, 0.4); }
        .mono { font-family: 'JetBrains Mono', monospace; }
    </style>
</head>
<body class="text-slate-200 min-h-screen flex items-center justify-center p-6">

    <div class="glass max-w-md w-full rounded-3xl p-8 text-center transition-all duration-500 hover:border-slate-500">
        <div class="mb-6 flex justify-center">
            <div id="icon-bg" class="p-4 rounded-2xl bg-slate-800/50">
                <i data-lucide="bot" id="main-icon" class="w-12 h-12 text-slate-400"></i>
            </div>
        </div>

        <h1 class="text-4xl font-extrabold tracking-tight mb-2">trim<span class="text-[var(--accent)]">.</span></h1>
        <p class="text-slate-400 text-sm font-medium mb-8 uppercase tracking-widest">Service Monitor</p>

        <div class="bg-slate-900/50 rounded-2xl p-6 border border-white/5">
            <div class="flex items-center justify-center space-x-3 mb-4">
                <div id="status-dot" class="w-3 h-3 rounded-full bg-slate-500 animate-pulse"></div>
                <span id="status-text" class="text-xl font-bold uppercase tracking-wider mono">Checking...</span>
            </div>
            
            <div class="text-[10px] text-slate-500 uppercase mono tracking-tighter">
                Last Heartbeat: <span id="last-update" class="text-slate-400">---</span>
            </div>
        </div>

        <div class="mt-8 pt-8 border-t border-white/5 flex justify-center space-x-4">
            <a href="#" class="text-slate-500 hover:text-[var(--accent)] transition-colors">
                <i data-lucide="github" class="w-5 h-5"></i>
            </a>
            <a href="#" class="text-slate-500 hover:text-[var(--accent)] transition-colors">
                <i data-lucide="external-link" class="w-5 h-5"></i>
            </a>
        </div>
    </div>

    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        async function updateUI() {
            try {
                // Fetch with a cache-buster timestamp
                const response = await fetch(`./status.json?t=${new Date().getTime()}`);
                const data = await response.json();
                
                const dot = document.getElementById('status-dot');
                const text = document.getElementById('status-text');
                const time = document.getElementById('last-update');
                const icon = document.getElementById('main-icon');

                if (data.status === 'online') {
                    dot.className = 'w-3 h-3 rounded-full bg-green-500 status-glow-online';
                    text.innerText = 'System Operational';
                    text.className = 'text-xl font-bold text-green-400 uppercase tracking-wider mono';
                    icon.className = 'w-12 h-12 text-green-400';
                } else {
                    dot.className = 'w-3 h-3 rounded-full bg-red-500 status-glow-offline';
                    text.innerText = 'Connection Lost';
                    text.className = 'text-xl font-bold text-red-400 uppercase tracking-wider mono';
                    icon.className = 'w-12 h-12 text-red-400';
                }

                time.innerText = data.last_updated || "Just now";

            } catch (error) {
                console.error("Error fetching status:", error);
            }
        }

        // Run on load and every 10 seconds
        updateUI();
        setInterval(updateUI, 10000);
    </script>
</body>
</html>
